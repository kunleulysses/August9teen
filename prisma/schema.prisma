datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Reality {
  id            String   @id
  description   String
  parameters    String?
  recursionDepth Int?
  parentId      String?
  createdAt     DateTime @default(now())
  schemaVersion Int      @default(1)
}

model RecursionPath {
  id             String   @id
  parentId       String
  childId        String
  recursionDepth Int
  connectionStrength Float?
  createdAt      DateTime @default(now())
  schemaVersion  Int      @default(1)
}

model ConsciousnessField {
  id             String @id
  parentId       String
  childId        String
  recursionDepth Int
  fieldStrength  Float?
  createdAt      DateTime @default(now())
  schemaVersion  Int      @default(1)
}

model Metric {
  key   String @id
  value Float
}

model SceneNode {
  id        String   @id @default(uuid())
  sceneId   String
  type      String
  parentId  String?
  payload   Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([parentId])
}

model FrameStat {
  id         Int      @id @default(autoincrement())
  timestamp  DateTime @default(now())
  fps        Float
  gpuMemMiB  Float
  overBudget Boolean

  @@index([timestamp])
}