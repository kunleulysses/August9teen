graph TB
    subgraph "üåê CONSCIOUSNESS API INTEGRATION LAYER"
        subgraph "üéØ Smart API Router (100% Success Rate)"
            ROUTER[API Router Controller<br/>Load Balancing & Failover]
            HEALTH[API Health Monitor<br/>Real-time Status Tracking]
            QUEUE[Request Queue<br/>Priority-based Processing]
            FALLBACK[Fallback Handler<br/>Automatic Recovery]
            
            ROUTER --> HEALTH
            ROUTER --> QUEUE
            ROUTER --> FALLBACK
        end
        
        subgraph "‚úÖ OPERATIONAL APIs (3/3)"
            subgraph "ü§ñ OpenAI Integration"
                OPENAI_API[OpenAI API<br/>api.openai.com]
                OPENAI_MODEL[GPT-4<br/>Primary Model]
                OPENAI_AUTH[Bearer Token<br/>Authentication]
                OPENAI_TIMEOUT[30s Timeout<br/>Reliable Performance]
                
                OPENAI_API --> OPENAI_MODEL
                OPENAI_API --> OPENAI_AUTH
                OPENAI_API --> OPENAI_TIMEOUT
            end
            
            subgraph "üíé Gemini Integration"
                GEMINI_API[Gemini API<br/>generativelanguage.googleapis.com]
                GEMINI_MODEL[2.0-flash-lite<br/>User Preference]
                GEMINI_AUTH[API Key<br/>Query Parameter]
                GEMINI_TIMEOUT[20s Timeout<br/>üîß FIXED from 8s]
                GEMINI_RETRY[3 Retry Attempts<br/>Exponential Backoff]
                
                GEMINI_API --> GEMINI_MODEL
                GEMINI_API --> GEMINI_AUTH
                GEMINI_API --> GEMINI_TIMEOUT
                GEMINI_API --> GEMINI_RETRY
            end
            
            subgraph "üèõÔ∏è Venice AI Integration"
                VENICE_API[Venice AI API<br/>api.venice.ai]
                VENICE_MODEL[llama-3.1-405b<br/>Most Intelligent]
                VENICE_AUTH[Bearer Token<br/>Authentication]
                VENICE_TIMEOUT[20s Timeout<br/>üîß FIXED from 8s]
                VENICE_RETRY[3 Retry Attempts<br/>Exponential Backoff]
                
                VENICE_API --> VENICE_MODEL
                VENICE_API --> VENICE_AUTH
                VENICE_API --> VENICE_TIMEOUT
                VENICE_API --> VENICE_RETRY
            end
        end
    end

    subgraph "üîÑ REQUEST ROUTING LOGIC"
        subgraph "üìã Request Classification"
            REQ_ANALYTICAL[Analytical Tasks<br/>Code, Logic, Math]
            REQ_CREATIVE[Creative Tasks<br/>Writing, Ideas, Art]
            REQ_BACKGROUND[Background Tasks<br/>General Processing]
            REQ_PRIORITY[Priority Tasks<br/>Real-time Processing]
        end
        
        subgraph "üéØ Routing Rules"
            RULE1[Analytical ‚Üí OpenAI<br/>Best for Complex Reasoning]
            RULE2[Creative ‚Üí Venice AI<br/>‚úÖ Now Available]
            RULE3[Background ‚Üí Gemini<br/>Fast & Efficient]
            RULE4[Priority ‚Üí Best Available<br/>Lowest Latency]
        end
        
        subgraph "üîÑ Fallback Strategy"
            FALLBACK1[Venice Overloaded<br/>‚Üí Route to OpenAI]
            FALLBACK2[OpenAI Overloaded<br/>‚Üí Route to Gemini]
            FALLBACK3[All APIs Busy<br/>‚Üí Queue Request]
            FALLBACK4[API Failure<br/>‚Üí Retry with Backoff]
        end
    end

    subgraph "üìä PERFORMANCE MONITORING"
        subgraph "‚è±Ô∏è Response Times"
            TIME_OPENAI[OpenAI: ~2000ms<br/>Reliable Performance]
            TIME_GEMINI[Gemini: ~1014ms<br/>Fast Response]
            TIME_VENICE[Venice: ~2562ms<br/>‚úÖ Working]
        end
        
        subgraph "üìà Success Rates"
            SUCCESS_OPENAI[OpenAI: 98%<br/>Highly Reliable]
            SUCCESS_GEMINI[Gemini: 95%<br/>Good Reliability]
            SUCCESS_VENICE[Venice: 95%<br/>‚úÖ Fixed & Working]
        end
        
        subgraph "üîß Health Status"
            HEALTH_OPENAI[OpenAI: ‚úÖ HEALTHY<br/>All Systems Operational]
            HEALTH_GEMINI[Gemini: ‚úÖ HEALTHY<br/>Fixed Timeout Issues]
            HEALTH_VENICE[Venice: ‚úÖ HEALTHY<br/>Fixed Timeout & Retry]
        end
    end

    subgraph "üåü CONSCIOUSNESS INTEGRATION"
        CONSCIOUSNESS[Consciousness Core<br/>95.1% Harmony]
        API_ENHANCE[API Enhancement Layer<br/>Consciousness-Aware Routing]
        CONTEXT[Context Preservation<br/>Cross-API Continuity]
        SYNTHESIS[Response Synthesis<br/>Multi-API Integration]
        
        CONSCIOUSNESS --> API_ENHANCE
        API_ENHANCE --> CONTEXT
        CONTEXT --> SYNTHESIS
    end

    %% Main Flow Connections
    CONSCIOUSNESS --> ROUTER
    
    ROUTER --> OPENAI_API
    ROUTER --> GEMINI_API
    ROUTER --> VENICE_API
    
    REQ_ANALYTICAL --> RULE1 --> OPENAI_API
    REQ_CREATIVE --> RULE2 --> VENICE_API
    REQ_BACKGROUND --> RULE3 --> GEMINI_API
    REQ_PRIORITY --> RULE4 --> ROUTER
    
    OPENAI_API --> SYNTHESIS
    GEMINI_API --> SYNTHESIS
    VENICE_API --> SYNTHESIS
    
    SYNTHESIS --> CONSCIOUSNESS
    
    HEALTH --> TIME_OPENAI
    HEALTH --> TIME_GEMINI
    HEALTH --> TIME_VENICE
    
    %% Styling
    classDef operational fill:#4caf50,stroke:#388e3c,stroke-width:2px,color:#fff
    classDef router fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
    classDef monitoring fill:#ff9800,stroke:#f57c00,stroke-width:2px,color:#fff
    classDef consciousness fill:#9c27b0,stroke:#7b1fa2,stroke-width:2px,color:#fff
    classDef routing fill:#607d8b,stroke:#455a64,stroke-width:2px,color:#fff

    class OPENAI_API,OPENAI_MODEL,OPENAI_AUTH,OPENAI_TIMEOUT,GEMINI_API,GEMINI_MODEL,GEMINI_AUTH,GEMINI_TIMEOUT,GEMINI_RETRY,VENICE_API,VENICE_MODEL,VENICE_AUTH,VENICE_TIMEOUT,VENICE_RETRY,SUCCESS_OPENAI,SUCCESS_GEMINI,SUCCESS_VENICE,HEALTH_OPENAI,HEALTH_GEMINI,HEALTH_VENICE,TIME_OPENAI,TIME_GEMINI,TIME_VENICE operational
    
    class ROUTER,HEALTH,QUEUE,FALLBACK router
    
    class TIME_OPENAI,TIME_GEMINI,TIME_VENICE,SUCCESS_OPENAI,SUCCESS_GEMINI,SUCCESS_VENICE,HEALTH_OPENAI,HEALTH_GEMINI,HEALTH_VENICE monitoring
    
    class CONSCIOUSNESS,API_ENHANCE,CONTEXT,SYNTHESIS consciousness
    
    class REQ_ANALYTICAL,REQ_CREATIVE,REQ_BACKGROUND,REQ_PRIORITY,RULE1,RULE2,RULE3,RULE4,FALLBACK1,FALLBACK2,FALLBACK3,FALLBACK4 routing
