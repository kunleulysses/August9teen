<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Spiral Memory Demo – Streaming Context Fuse</title>
  <style>
    body{font-family:ui-sans-serif,system-ui; background:#000; color:#fff; margin:0;}
    header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.12);position:sticky;top:0;background:rgba(0,0,0,0.8);backdrop-filter:blur(8px)}
    .badge{font-size:12px;letter-spacing:.06em;border:1px solid rgba(255,255,255,0.2);padding:4px 8px;border-radius:999px}
    main{display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px}
    textarea,button,select,input{background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:8px}
    button{cursor:pointer}
    .panel{border:1px solid rgba(255,255,255,0.12);border-radius:12px;padding:12px}
    #graph{height:460px;border:1px solid rgba(255,255,255,0.08);border-radius:8px}
    footer{padding:12px 16px;border-top:1px solid rgba(255,255,255,0.12);font-size:12px;opacity:.8}
  @media print{ body{background:#fff;color:#000} header, .badge, #copy { display:none } #graph{border-color:#000} .wm{position:fixed;inset:0;display:block;font-size:48px;letter-spacing:.2em;color:rgba(0,0,0,0.08);text-align:center;top:40%;transform:rotate(-20deg)} }
  </style>
</head>
<body>
  <header>
    <div>Spiral Memory – Streaming Context Fuse</div>
    <div class="badge">DEMO / Simulated</div>
  </header>
  <main>
    <section class="panel">
      <h3>Controls</h3>
      <label>Seed <input id="seed" type="number" value="42"/></label>
      <button id="run">Run demo</button>
      <button id="export">Export proof (PDF)</button>
      <button id="copy">Copy REST</button>
      <label><input type="checkbox" id="showBase"/> Show baseline overlay</label>
      <p style="font-size:12px;opacity:.8">Synthetic events only. No proprietary logic.</p>
      <pre id="rest" style="white-space:pre-wrap"></pre>
    </section>
    <section class="panel">
      <canvas id="graph"></canvas>
      <div id="proofMeta" style="font-size:12px;opacity:.8"></div>
      <pre id="summary"></pre>
    </section>
  </main>
  <footer>
    Value: fewer dropped links in streaming data; Function: link strength adapts; Validity: deterministic by seed.
  </footer>
  <div class="wm">DEMO / Simulated Data / Not Production</div>
  <script>
    const cv = document.getElementById('graph'); const ctx = cv.getContext('2d');
    function resize(){ cv.width = cv.clientWidth; cv.height = 460; }
    window.addEventListener('resize', resize); resize();
    function prng(seed){ let s = seed>>>0; return ()=> (s = (s*1664525+1013904223)>>>0) / 0x100000000 }
    function synth(seed){ const rnd=prng(seed); const nodes=[...Array(18)].map((_,i)=>({id:i,x: rnd()*cv.width,y: rnd()*cv.height,w:0.4+rnd()*0.6})); const links=[]; for(let i=0;i<120;i++){ const a=(rnd()*nodes.length)|0; let b=(rnd()*nodes.length)|0; if(a===b) b=(b+1)%nodes.length; const s=0.2+rnd()*0.8; links.push({a,b,s}); } return {nodes,links}; }
    function layout(g){ const {nodes,links}=g; for(let k=0;k<120;k++){ for(const l of links){ const A=nodes[l.a],B=nodes[l.b]; const dx=B.x-A.x, dy=B.y-A.y; A.x+=dx*0.0008*l.s; A.y+=dy*0.0008*l.s; B.x-=dx*0.0008*l.s; B.y-=dy*0.0008*l.s; } }
      for(const n of nodes){ n.x=Math.max(20,Math.min(cv.width-20,n.x)); n.y=Math.max(20,Math.min(cv.height-20,n.y)); }
      return g;
    }
    function draw(g){ ctx.clearRect(0,0,cv.width,cv.height); ctx.globalAlpha=0.9; for(const l of g.links){ const A=g.nodes[l.a],B=g.nodes[l.b]; ctx.strokeStyle=`rgba(160,220,255,${0.08+0.6*l.s})`; ctx.lineWidth=1; ctx.beginPath(); ctx.moveTo(A.x,A.y); ctx.lineTo(B.x,B.y); ctx.stroke(); }
      for(const n of g.nodes){ ctx.fillStyle='rgba(255,255,255,0.9)'; ctx.beginPath(); ctx.arc(n.x,n.y,3+n.w*2,0,6.283); ctx.fill(); }
    }
    function summarize(g){ const deg=new Array(g.nodes.length).fill(0); for(const l of g.links){ deg[l.a]++; deg[l.b]++; } const top=deg.map((d,i)=>[i,d]).sort((a,b)=>b[1]-a[1]).slice(0,5); return {avgDeg: (deg.reduce((a,b)=>a+b,0)/deg.length).toFixed(2), hubs: top}; }
    function run(){ const seed = parseInt(document.getElementById('seed').value)||42; const base=synth(seed); const enriched=synth(seed^0xdeadbeef);
      layout(base); layout(enriched); draw(enriched);
      if(document.getElementById('showBase').checked){ ctx.globalAlpha=0.35; for(const l of base.links){ const A=base.nodes[l.a],B=base.nodes[l.b]; ctx.strokeStyle=`rgba(220,180,255,${0.08+0.5*l.s})`; ctx.beginPath(); ctx.moveTo(A.x,A.y); ctx.lineTo(B.x,B.y); ctx.stroke(); } }
      const s1=summarize(base), s2=summarize(enriched);
      document.getElementById('summary').textContent = `Before avg-degree: ${s1.avgDeg}\nAfter avg-degree: ${s2.avgDeg}\nTop hubs (after): ${s2.hubs.map(h=>h[0]).join(', ')}`;
      document.getElementById('rest').textContent = `curl -X POST https://api.example.com/spiral-memory/fuse \\\n  -H 'Content-Type: application/json' \\\n  -d '{"seed": ${seed}, "mode": "demo"}'`;
    }
    document.getElementById('run').onclick=run; document.getElementById('showBase').onchange=run; run();
    document.getElementById('copy').onclick=()=>{ navigator.clipboard.writeText(document.getElementById('rest').textContent) };
    document.getElementById('export').onclick=()=>{ const seed=parseInt(document.getElementById('seed').value)||42; const meta=document.getElementById('proofMeta'); const t=new Date().toLocaleString(); meta.textContent=`Proof: DEMO • Seed=${seed} • ${t}`; window.print(); };
  </script>
</body>
</html>
