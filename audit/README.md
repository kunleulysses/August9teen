# Spiral Memory Audit Report

## How to run

```sh
npm run spiral:audit
```

## Output files

- **spiral-metrics.json**: Runtime snapshot of SpiralMemoryArchitecture and SpiralMemoryIntegration after 200+20 dummy store/integrate ops.
- **event-keys.json**: All EventBus event keys containing "spiral" or "memory" (emit/on).
- **duplicate-files.json**: List of spiral-memory module backups/duplicates (.bak, .backup, .orig, .rej).
- **test-summary.json**: Pass/fail summary for all Jest tests with "spiral" in filename.

## Guidance

- No spiral modules are refactoredâ€”this is a read-only audit.
- If spiral-metrics.json shows errors, check module paths or require errors.
- If test-summary.json is empty or missing, ensure Jest is installed and spiral tests exist.

---

## Operations Guide

### Checking Spiral Metrics

Start the metrics server:
```sh
npm run spiral:build
npm run spiral:serve
```

Check metrics endpoint:
```sh
curl http://localhost:9099/metrics
```

Import the dashboard from:
`monitoring/grafana/spiral-dashboard.json`

---

### Cluster Setup

If you have a Redis cluster, set `REDIS_CLUSTER_URL` (comma-separated) and launch:

```sh
REDIS_CLUSTER_URL="host1:6379,host2:6379,host3:6379" node scripts/spiral-launch-cluster.js 4
```

Each process will handle a different shard and only the leader will run GC for its shard.

---

Generated by audit/spiral-memory-baseline.js