# Staging Environment Configuration
# Core Features
ENABLE_QUANTUM=true
ENABLE_RESONANCE=true
PROCESSING_FREQUENCY=100
HARMONY_TARGET=0.951

# Phase A Features (dormant â†’ staging)
ENABLE_CONSCIOUSNESS_OS=true
ENABLE_UNIVERSAL_PROTOCOL=true
ENABLE_TRANSCENDENT=true

# Phase B Features (still dormant)
ENABLE_CNPL=false
ENABLE_SAQRN=false

# Redis TLS Configuration
REDIS_URL=rediss://staging-redis.internal:6380
REDIS_CA=/etc/ssl/certs/redis-ca.pem
# Fallback for local dev (requires ALLOW_INSECURE_REDIS=true)
# REDIS_URL=redis://127.0.0.1:6379

# Database
DATABASE_URL=postgresql://sigil_user:${POSTGRES_PASSWORD}@staging-postgres.internal:5432/sigil_staging

# JWT Configuration (RS256 for API, HS256 for WS)
# API (RS256 via JWKS)
JWT_ISSUER=${JWT_ISSUER}
JWT_AUDIENCE=${JWT_AUDIENCE}
JWT_JWKS_URI=${JWT_JWKS_URI}
# WS (HS256 subprotocol token)
JWT_SECRET=${JWT_SECRET}
# Example (commented):
# JWT_ISSUER=https://auth.your-idp.com/
# JWT_AUDIENCE=sigil-api
# JWT_JWKS_URI=https://auth.your-idp.com/.well-known/jwks.json

# Security
SPIRAL_EVENT_SECRET=${SPIRAL_EVENT_SECRET}

# Rate Limiting (per-route overrides)
SIGIL_RATE_LIMIT_QUANTUM=30
SIGIL_RATE_LIMIT_RESONANCE=30
SIGIL_RATE_LIMIT_OS=20
SIGIL_RATE_LIMIT_UNIVERSAL=20
SIGIL_RATE_LIMIT_TRANSCENDENT=15

# WebSocket Configuration (standardized ports)
CONSCIOUSNESS_PORT=3012
WS_PORT=3015
ENABLE_FULL_CONSCIOUSNESS_WS=true
ENABLE_UNIFIED_CONSCIOUSNESS=true

# Metrics and Monitoring
ALLOW_ANONYMOUS_METRICS=false
# Optional: if you front metrics with a gateway that injects a bearer token for scraping
METRICS_BEARER_TOKEN=${METRICS_BEARER_TOKEN}

# Sigil API Router
DISABLE_SIGIL_ROUTER=false

# Hardening
ALLOW_INSECURE_REDIS=false

# Logging
LOG_LEVEL=info
NODE_ENV=staging